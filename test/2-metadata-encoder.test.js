const {
  SAMPLE_USER_DATA,
  SAMPLE_ETH_ADDRESS_1,
  SAMPLE_METADATA_CHAIN_ID_1,
  SAMPLE_METADATA_CHAIN_ID_2,
} = require('./test-utils')
const assert = require('assert')
const { encodeCoreMetadata } = require('../lib/metadata-encoder')

describe('Metadata Encoder Contract', () => {
  it('Should encode core metadata v1', () => {
    const result = encodeCoreMetadata(
      SAMPLE_USER_DATA,
      SAMPLE_METADATA_CHAIN_ID_1,
      SAMPLE_ETH_ADDRESS_1,
    )
    /* eslint-disable-next-line max-len */
    const expectedResult = '0x0100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008000f3436800000000000000000000000000000000000000000000000000000000000000000000000000000000fedfe2616eb3661cb8fed2782f5f0cc91d59dcac0000000000000000000000000000000000000000000000000000000000000003d3caff0000000000000000000000000000000000000000000000000000000000'
    assert.strictEqual(result, expectedResult)
  })

  it('Should encode core metadata v2', () => {
    const result = encodeCoreMetadata(
      SAMPLE_USER_DATA,
      SAMPLE_METADATA_CHAIN_ID_1,
      SAMPLE_ETH_ADDRESS_1,
      SAMPLE_METADATA_CHAIN_ID_2,
    )
    /* eslint-disable-next-line max-len */
    const expectedResult = '0x020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a000f3436800000000000000000000000000000000000000000000000000000000000000000000000000000000fedfe2616eb3661cb8fed2782f5f0cc91d59dcac0069c322000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003d3caff0000000000000000000000000000000000000000000000000000000000'
    assert.strictEqual(result, expectedResult)
  })
})
